<div class="select-auth">
</div>


<script type="text/javascript">
  function c(){

    this.auths = [];

    this.start = function(opts){
      this.auths = opts || [];

      if(this.auths.length == 1 && this.comprobateAutoRedirect()){
        console.log('auto redirect');

        if(localStorage['welcome_' + PrivateData.get('email_logined')]){
          app.loadScreen(app.SCREENS.AUTHORIZATIONS);
        }else{
          app.loadScreen(app.SCREENS.WELCOME);
        }
      }

      //app.pageLoading('hide');
    }

    this.comprobateAutoRedirect = function(){
      if(this.auths.length == 1 && this.auths[0].auths.length == 1){
        return this.loginWith(this.auths[0].auths[0].code,this.auths[0].auths[0].url_server_for_app);
      }else{
        return false;
      }
    }

    this.loginWith = function(code, url){
      PrivateData.set('current_auth_code',code);
      PrivateData.set('current_server_portal',url);

      return true;
    }

    this.getAuths = function(){
      Server.send({
        route : [PrivateData.get('country_server_url'),'app','get_auths'],
        data : {},
        callback : function(data, success){
          console.log(data);
          if(success){
          }else{
          }
        }
      });
    }

    this.back = function(){
      app.loadScreen(app.SCREENS.LOGIN);
    };

  }
</script>