<div class="expenses-show-nothing expenses-show-per-meter">
  <div class="scroll">
    <div class="item">
      <div class="row">
        <div class="info">
          <h4 id="provider">Liquidaci√≥n</h4>
          <h5 id="concept">Precio por m<sup>2</sup></h5>
        </div>
        <div class="amount">
          <h6># 000</h6>
          <h5>$ <span id="total"></span></h5>
        </div>
      </div>
    </div>
  </div>
  <div class="totals">
    <div class="item">
      <div class="row">
        <div class="info">
          <h4>m<sup>2</sup> de <span id="group_identificator"></span></h4>
        </div>
        <div class="value">
          <h5><span id="square_meters">-</spam> %</h5>
        </div>
      </div>
    </div>
    <div class="item">
      <div class="row">
        <div class="info">
          <h4 id="total_expenses_label"></h4>
        </div>
        <div class="value">
          <h5>$ <span id="total_expenses">-</span></h5>
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  function c(){

    this.entry_id;
    this.callback_get_entry;
    this.impute_date;

    this.start = function(opts){
      opts = opts || {};

      this.entry_id = opts.entry_id;

      app.liActive('expenses');

      $('.expenses-show-per-meter #group_identificator').html(PrivateData.get('current_group_identificator'));

      this.getEntry(function(){
        app.pageLoading('hide');
      });
    }

    this.getEntry = function(callback){
      this.callback_get_entry = callback;

      Server.send({
        route : [PrivateData.get('current_server_portal'),'app','group_current_accounts','show_expenses_per_meter'],
        data : {
          id: this.entry_id
        },
        callback : function(data, success){
          console.log(data);
          if(success){

            $('#total').html(data.total.toFixed(2));
            $('#square_meters').html(data.square_meters.toFixed(2));
            $('#total_expenses').html(data.total_expenses.toFixed(2));

            $('#total_expenses_label').html('Expensas ' + Extends.formatDate(new Date(data.real_date + "T00:00:00"),'%mabbr. del %yyyy'));
            $('.header .section-name').html('Expensas ' + Extends.formatDate(new Date(data.real_date + "T00:00:00"),'%mabbr. del %yyyy'));

            cs.impute_date = new Date(data.impute_date + "T12:00:00");
            cs.callback_get_entry();
          }
        }
      });
    };

    this.back = function(){
      app.loadScreen(app.SCREENS.EXPENSES,{
        month: Extends.formatDate(this.impute_date,'%yyyy-%mm')
      });
    }

  }
</script>